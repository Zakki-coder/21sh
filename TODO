Seems that the redirs and closefd are executed twice. Why does this work: 0>&- >&- > lol ls ; cat lol
When comparing stderr just take everything after bash: and 21sh:
semicolon
Sometimes after command does not print prompt before nl is given again(PROBABLY FIXED, CAUSED BY NO WAIT AFTER FORK"
Error managment for redir, input redri` open fails if no existing file
Root leak with redir
Root leak with any command
